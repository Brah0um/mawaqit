{% extends 'base.html.twig' %}

{% block title %} {{ parent() }} Accueil{% endblock %}

{% block body %}
    {% include 'partial/flash_msg.html.twig' %}

    <a href="{{path('mosque_create')}}" class="btn btn-primary">Ajouter une mosqu√©e</a><br><br>

    <table class="table table-inverse">
        <thead>
            <tr>
                <th>#</th>
                <th>{{'mosque.name'|trans}}</th>
                <th>{{'global.association_name'|trans}}</th>
                <th>{{'global.phone'|trans}}</th>
                <th>{{'global.email'|trans}}</th>
                <th>{{'global.address'|trans}}</th>
                <th>{{'global.prayer_site'|trans}}</th>
            </tr>
        </thead>
        <tbody>
            {% for mosque in mosques %}
                {% set confCompleted = mosque.configuration is not null and mosque.configuration.completed %}
                <tr class="{{ confCompleted == false ? 'danger' : '' }}">
                    <th scope="row">{{mosque.id}}</th>
                    <td>{{mosque.name}}</td>
                    <td>{{mosque.associationName}}</td>
                    <td>{{mosque.phone}}</td>
                    <td>{{mosque.email}}</td>
                    <td>
                        {{mosque.address}}<br>
                        {{mosque.city}} {{mosque.zipcode}}<br>
                        {{mosque.country}}
                    </td>
                    <td>
                        {% if confCompleted %}
                            <a target="_blank" href="{{ path("mosque", {slug: mosque.slug})}}">{{ url("mosque", {slug: mosque.slug}) }}</a>
                        {% else %}
                            <div class="row">
                                 <div class="col-md-1">
                                    <span class="glyphicon glyphicon-alert"></span>
                                </div>
                                <div class="col-md-11">
                                    {{'configuration.list.conf_not_completed'|trans|raw}}
                                </div> 
                            </div> 
                        {% endif %}
                    </td>
                    <td>
                        <a href="{{path('mosque_edit', {id: mosque.id})}}" class="btn btn-info" title={{'form.edit.action'|trans}}><span class="glyphicon glyphicon-pencil"></span></a>
                        <a href="{{path('mosque_configure', {id: mosque.id})}}" class="btn btn-warning" title={{'form.configure.action'|trans}}><span class="glyphicon glyphicon-cog"></span></a>
                        <a href="{{path('mosque_delete', {id: mosque.id})}}" class="btn btn-danger" title={{'form.delete.action'|trans}}><span class="glyphicon glyphicon-trash"></span></a>
                    </td>
                </tr>
            {% endfor %}
        </tbody>
    </table>    
{% endblock %}